<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Deux Fenêtres</title>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
    <link rel="import" href="bower_components/full-width-text/full-width-text.html">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            font-family: 'Josefin Sans', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }

        div {
            color: #000;
        }

        .container {
            display: flex;
            gap: 25%;
        }

        .box {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .vertical-logo {
            display: flex;
            flex-direction: column;
            height: 201;
            width: 167px;
            overflow: hidden;
        }

        .numberofdepartement {
            transform: translateY(-35px);
            display: flex;
            flex-direction: row;
            width: 100%;
            align-items: center;
        }

        .numberofdepartement p {
            font-size: xx-large;
            font-weight: bolder;
            padding: 0px 8px;
            color: #d41111;
        }

        .title-logo-vertical {
            padding-top: 10px;
        }

        .red-box {
            display: flex;
            flex-direction: row;
            height: 201px;
            width: 570px;
            overflow: hidden;
        }

        .red-box img {
            height: 100%;
            width: auto;
            object-fit: cover;
        }

        .info-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            color: #d41111;
            font-size: 14px;
            text-align: center;
        }

        .info-row {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            color: #d41111;
            font-size: 14px;
            text-align: center;
            padding-left: 15px;
        }

        .info-text {
            width: 100%;
            height: 90%;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            text-align: center;
        }

        .line {
            width: 100%;
            height: 2px;
            background-color: #d41111;
        }

        .departement-svg {
            padding-top: 2%;
        }

        .vertical-departement {
            padding-top: 7%;
        }

        full-width-text {
            color: #d41111;
        }

        #exportButton {
            border-radius: 15px;
            border: 1px solid #d41111;
            padding: 5px;
            color: #d41111;
            font-weight: bold;
            font-size: 2vh;
            transition: all .5s ease-in-out;
        }
        #exportButton:hover {
            background-color: #d41111;
            transform: scale(1.1);
            color: #ffff;
            padding: 10px;
            border-radius: 20px;
        }

        .social{
            width: 100%;
        }

        .social-links {
            width: 100%;
            display: flex;
            padding: 0;
            margin: 0;
            align-items: center;
            flex-direction: row;
            justify-content: space-around;
            padding: 0;
        }
        .social-links ul {
            margin: 0;
            padding: 0;
        }
        .social-links li {
            list-style: none;
        }
        .social-links li a {
            color: #d41111;
            font-size: 3vh;
        }
        p {
            color: grey;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="box">
            <label for="departement">Choisissez un département :</label>
            <select id="departement">
                <option>FR - de France</option>
                <option>01 - de l'Ain</option>
                <option>02 - Aisne</option>
                <option>03 - Allier</option>
                <option>04 - Alpes-de-Haute-Provence</option>
                <option>05 - Hautes-Alpes</option>
                <option>06 - Alpes-Maritimes</option>
                <option>07 - Ardèche</option>
                <option>08 - Ardennes</option>
                <option>09 - Ariège</option>
                <option>10 - Aube</option>
                <option>11 - Aude</option>
                <option>12 - Aveyron</option>
                <option>13 - Bouches-du-Rhône</option>
                <option>14 - Calvados</option>
                <option>15 - Cantal</option>
                <option>16 - Charente</option>
                <option>17 - Charente-Maritime</option>
                <option>18 - Cher</option>
                <option>19 - Corrèze</option>
                <option>2A - Corse-du-Sud</option>
                <option>2B - Haute-Corse</option>
                <option>21 - Côte-d'Or</option>
                <option>22 - Côtes-d'Armor</option>
                <option>23 - Creuse</option>
                <option>24 - Dordogne</option>
                <option>25 - Doubs</option>
                <option>26 - Drôme</option>
                <option>27 - Eure</option>
                <option>28 - Eure-et-Loir</option>
                <option>29 - Finistère</option>
                <option>30 - Gard</option>
                <option>31 - Haute-Garonne</option>
                <option>32 - Gers</option>
                <option>33 - Gironde</option>
                <option>34 - Hérault</option>
                <option>35 - Ille-et-Vilaine</option>
                <option>36 - Indre</option>
                <option>37 - Indre-et-Loire</option>
                <option>38 - Isère</option>
                <option>39 - Jura</option>
                <option>40 - Landes</option>
                <option>41 - Loir-et-Cher</option>
                <option>42 - Loire</option>
                <option>43 - Haute-Loire</option>
                <option>44 - Loire-Atlantique</option>
                <option>45 - Loiret</option>
                <option>46 - du Lot</option>
                <option>47 - Lot-et-Garonne</option>
                <option>48 - Lozère</option>
                <option>49 - Maine-et-Loire</option>
                <option>50 - Manche</option>
                <option>51 - Marne</option>
                <option>52 - Haute-Marne</option>
                <option>53 - Mayenne</option>
                <option>54 - Meurthe-et-Moselle</option>
                <option>55 - Meuse</option>
                <option>56 - Morbihan</option>
                <option>57 - Moselle</option>
                <option>58 - Nièvre</option>
                <option>59 - Nord</option>
                <option>60 - Oise</option>
                <option>61 - Orne</option>
                <option>62 - Pas-de-Calais</option>
                <option>63 - Puy-de-Dôme</option>
                <option>64 - Pyrénées-Atlantiques</option>
                <option>65 - Hautes-Pyrénées</option>
                <option>66 - Pyrénées-Orientales</option>
                <option>67 - Bas-Rhin</option>
                <option>68 - Haut-Rhin</option>
                <option>69 - Rhône</option>
                <option>70 - Haute-Saône</option>
                <option>71 - Saône-et-Loire</option>
                <option>72 - Sarthe</option>
                <option>73 - Savoie</option>
                <option>74 - Haute-Savoie</option>
                <option>75 - Paris</option>
                <option>76 - Seine-Maritime</option>
                <option>77 - Seine-et-Marne</option>
                <option>78 - Yvelines</option>
                <option>79 - Deux-Sèvres</option>
                <option>80 - Somme</option>
                <option>81 - Tarn</option>
                <option>82 - Tarn-et-Garonne</option>
                <option>83 - du Var</option>
                <option>84 - Vaucluse</option>
                <option>85 - Vendée</option>
                <option>86 - Vienne</option>
                <option>87 - Haute-Vienne</option>
                <option>88 - Vosges</option>
                <option>89 - Yonne</option>
                <option>90 - Territoire de Belfort</option>
                <option>91 - Essonne</option>
                <option>92 - Hauts-de-Seine</option>
                <option>93 - Seine-Saint-Denis</option>
                <option>94 - Val-de-Marne</option>
                <option>95 - Val-d'Oise</option>
                <option>971 - Guadeloupe</option>
                <option>972 - Martinique</option>
                <option>973 - Guyane</option>
                <option>974 - La Réunion</option>
                <option>976 - Mayotte</option>
            </select>
            <br>
            <button id="exportButton">Exporter en PNG</button>
            <br>
            <div class="social">
                <ul class="social-links">
                    <li><a href="https://twitter.com/clementt_exe" class="twitter" target="_blank"><i class="fa-brands fa-x-twitter"></i></i></a></li>
                    <li><a href="https://instagram.com/clementt.exe" class="instagram" target="_blank"><i class="fa-brands fa-instagram"></i></a></li>
                </ul>
            </div>
            <br>
            <br>
            <p>© clementt_exe | 2025</p>
        </div>

        <div class="box">
            <div class="red-box" id="redBox">
                <img src="jc.svg" alt="JC" />
                <div class="info-row">
                    <div class="line"></div>
                    <div class="info-text">
                        <div class="title">
                            <full-width-text>JEUNES</full-width-text>
                            <full-width-text>COMMUNISTE</full-width-text>
                        </div>
                        <full-width-text class="departement-svg" id="departementDisplay">de France</full-width-text>
                    </div>
                    <div class="line"></div>
                </div>
            </div>
            <br>
            <div class="vertical-logo" id="verticalLogo">
                <img src="jc.svg" alt="JC" />
                <div class="info-column">
                    <div class="info-text">
                        <div class="title-logo-vertical">
                            <full-width-text>JEUNES COMMUNISTE</full-width-text>
                        </div>
                        <full-width-text class="departement-svg vertical-departement" id="departementDisplay">de France</full-width-text>
                    </div>
                    <div class="numberofdepartement">
                        <div class="line"></div>
                        <p>FR</p>
                        <div class="line"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    const select = document.getElementById('departement');

    select.addEventListener('change', function () {
        const selectedOption = select.options[select.selectedIndex].text;
        const departmentCode = selectedOption.match(/^[^ -]+/)[0]; // Extrait "2A", "01", etc.
        const departmentName = selectedOption.split(' - ')[1] || selectedOption;

        const combined = departmentCode + '-' + departmentName.toUpperCase();
        window.location.href = window.location.pathname + '?dep=' + encodeURIComponent(combined);
    });
</script>

<script>
    function getParam(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }

    const depParam = getParam('dep');
    if (depParam) {
        const [departmentCode, ...nameParts] = depParam.split('-');
        const departmentName = nameParts.join('-').toUpperCase();

        const select = document.getElementById('departement');
        const options = Array.from(select.options);
        let matchedOption = null;

        // Normaliser pour ignorer les accents, comparer proprement
        const normalize = str => str.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");

        for (let option of options) {
            const [code, ...nameParts] = option.text.split(' - ');
            if (!code || nameParts.length === 0) continue;

            const name = nameParts.join(' - ');
            if (normalize(code) === normalize(departmentCode) && normalize(name) === normalize(departmentName)) {
                matchedOption = option;
                break;
            }
        }

        if (matchedOption) {
            // ✅ Le département est valide
            select.value = matchedOption.value;

            const displays = document.querySelectorAll('.departement-svg');
            displays.forEach(display => {
                display.textContent = departmentName;
            });

            const depNumberElement = document.querySelector('.numberofdepartement p');
            if (depNumberElement) {
                depNumberElement.textContent = departmentCode;
            }
        } else {
            // ❌ Département invalide : on redirige ou affiche un message
            alert("Département invalide !");
            window.location.href = window.location.pathname; // ou bien rester ici sans rien faire
        }
    }
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const depFromUrl = urlParams.get("dep");

        if (depFromUrl) {
            const select = document.getElementById("departement");
            const normalizedUrlDep = depFromUrl.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");

            for (let i = 0; i < select.options.length; i++) {
                const optionText = select.options[i].text;
                const namePart = optionText.split(" - ")[1];
                if (!namePart) continue;

                const normalizedOption = namePart.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                if (normalizedOption === normalizedUrlDep) {
                    select.selectedIndex = i;
                    break;
                }
            }
        }
    });
    
</script>

<script src="bower_components/webcomponentsjs/webcomponents.min.js"></script>

</html>
